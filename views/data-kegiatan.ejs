<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Kegiatan</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap-icons/font/bootstrap-icons.min.css">
    <style>
        .sec-navbar{
          height: 100vh;
        }
        body {
          overflow: hidden;
        }
        .data-mahasiswa {
          max-height: 100vh;
          overflow-y: visible;
        }
        .data-mahasiswa .container {
          overflow-y: auto;
          max-height: calc(100vh - 200px);
        }
    </style>
</head>
<body>
    <nav class="navbar bg-dark row">
        <div class="container-fluid">
          <span class="navbar-brand mb-3 ms-5 h1 text-white">ABSEN ANAK MAGANG</span>
        </div>
    </nav>
    <div class="row">
        <nav class="col-md-4 nav flex-column bg-dark w-25 sec-navbar">
            <h3 class="ms-5 mb-3 text-white bi-person-circle">   <%= username %></h3>
            <a class="nav-link bi-house-door-fill ms-5" href="dashboard">    Beranda</a>
            <a class="nav-link bi-people-fill ms-5" href="data-mhs">    Data Mahasiswa</a>
            <a class="nav-link bi-calendar-fill ms-5" href="data-absen">  Data Absensi</a>
            <a class="nav-link bi-book-fill ms-5" href="data-kegiatan"> Data Kegiatan</a>
            <a class="nav-link bi-person-fill ms-5" href="administrator"> Administrator</a>
            <a class="nav-link bi-gear-fill ms-5" href="pengaturan"> Pengaturan</a>
            <a class="nav-link bi-box-arrow-left ms-5" href="/"> Logout</a>
        </nav>

        <div class="col-md-10 bg-body-secondary w-75 data-mahasiswa">
            <p class="p-3 bi-book-fill">  /   Data Kegiatan</p>
            <div class="card">
              <div class="card-header p-3 d-flex align-items-center justify-content-between">
                <h5>Data Kegiatan</h5>
                <div class="input-group w-50">
                  <input type="text" class="form-control" placeholder="Cari">
                  <div class="input-group-prepend">
                    <button class="btn btn-outline-secondary bi-search" type="button"></button>
                  </div>
                </div>
              </div>
            </div>

            <div class="container">
              <h3>DATA KEGIATAN</h3>
              <a class="btn btn-success bi-plus mb-3" href="/tambah-kegiatan"> Tambah</a>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">No</th>
                    <th scope="col">Nama Mahasiswa</th>
                    <th scope="col">Hari</th>
                    <th scope="col">Tanggal</th>
                    <th scope="col">Jam</th>
                    <th scope="col">Kegiatan</th>
                    <th scope="col">Aksi</th>
                  </tr>
                </thead>
                <tbody>
                  <% let index = 1; %>
                  <% kegiatan.forEach((kegiatans) => { %>
                    <tr>
                      <th scope="row"><%= index++ %></th>
                      <th scope="row"><%= kegiatans.username %></th>
                      <th scope="row"><%= kegiatans.hari %></th>
                      <th scope="row"><%= moment(kegiatans.tanggal).format('DD-MM-YYYY') %></th>
                      <th scope="row">
                        <% const jam = kegiatans.jam.split(', '); %>
                        <% for (let i = 0; i < jam.length; i++) { %>
                          <%= jam[i] %><br>
                        <% } %>
                      </th>
                      <th scope="row">
                        <% const kegiatan = kegiatans.kegiatan.split(', '); %>
                        <% for (let i = 0; i < kegiatan.length; i++) { %>
                          <%= i + 1 %>. <%= kegiatan[i] %><br>
                        <% } %>
                      </th>
                      <th scope="row">
                        <a href="/edit-kegiatan/<%= kegiatans.id %>" class="btn btn-warning bi-pencil-square"></a>
                        <a href="/hapus-kegiatan/<%= kegiatans.id %>" class="btn btn-danger bi-trash-fill" onclick="return confirm('Are you sure you want to delete this kegiatan?')"></a>
                        <a href="" class="btn btn-primary bi-file-text-fill"></a>
                      </th>
                    </tr>
                    <% increment = kegiatan.length; %>
                  <% }) %>
                </tbody>
              </table>
            </div>

        </div>
    </div>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>